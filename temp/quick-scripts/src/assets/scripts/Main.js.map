{"version":3,"sources":["assets\\scripts\\Main.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport Block from \"./Block\";\r\nimport Snake from \"./Snake/Snake\";\r\nimport MyBtn from \"./Utils/MyBtn\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Main extends cc.Component {\r\n\r\n    @property({type:cc.Prefab})\r\n    bigfruit: cc.Prefab = null;\r\n\r\n    @property({type:cc.Prefab})\r\n    snakePrefab: cc.Prefab = null;\r\n\r\n    @property({type:cc.SpriteFrame})\r\n    bigFruitOrgin_sprite: cc.SpriteFrame = null;\r\n\r\n    @property({type:cc.SpriteFrame})\r\n    fruitOrgin_sprite: cc.SpriteFrame = null;\r\n\r\n    @property(MyBtn)\r\n    upArrow: MyBtn = null;\r\n\r\n    @property(MyBtn)\r\n    downArrow: MyBtn = null;\r\n\r\n    @property(MyBtn)\r\n    leftArrow: MyBtn = null;\r\n\r\n    @property(MyBtn)\r\n    rightArrow: MyBtn = null;\r\n\r\n    onLoad(){\r\n        //this.GeneratorBigFood(this.bigFruitOrgin_sprite.getTexture());\r\n        this.generateNewFood();\r\n        cc.director.getCollisionManager().enabled=true;\r\n\r\n        this.registerAllEvents();\r\n\r\n        this.GeneratorSnake();\r\n    }\r\n    generateNewFood(){\r\n        this.GeneratorFood(this.fruitOrgin_sprite,new cc.Vec2(this.myrandom(-280,280),this.myrandom(-280,380)));\r\n    }\r\n\r\n    registerAllEvents(){\r\n        this.upArrow.node.on(cc.Node.EventType.TOUCH_START,()=>{\r\n            this.upArrow.onPressed();\r\n            cc.game.emit(\"move_up\",\"up\");\r\n        },this);\r\n        this.downArrow.node.on(cc.Node.EventType.TOUCH_START,()=>{\r\n            this.downArrow.onPressed();\r\n            cc.game.emit(\"move_down\",\"down\");\r\n        },this);\r\n        this.leftArrow.node.on(cc.Node.EventType.TOUCH_START,()=>{\r\n            this.leftArrow.onPressed();\r\n            cc.game.emit(\"move_left\",\"left\");\r\n        },this);\r\n        this.rightArrow.node.on(cc.Node.EventType.TOUCH_START,()=>{\r\n            this.rightArrow.onPressed();\r\n            cc.game.emit(\"move_right\",\"right\");\r\n        },this);\r\n\r\n        cc.game.on(\"eating\",this.generateNewFood,this);\r\n    }\r\n\r\n    GeneratorSnake(){\r\n        let newSnake = cc.instantiate(this.snakePrefab);\r\n        newSnake.setParent(this.node);\r\n        newSnake.setPosition(cc.Vec2.ZERO);\r\n        newSnake.getComponent(Snake).initSnake(2);\r\n\r\n        newSnake.getComponent(Snake).startMove();\r\n    }\r\n\r\n    GeneratorBigFood(bigFriutSprite){\r\n        for (let i = 0; i < 2; i++) {\r\n            for (let j = 0; j < 2; j++) {\r\n                let newBlock = cc.instantiate(this.bigfruit);\r\n                newBlock.parent=this.node;\r\n                newBlock.setPosition(j * newBlock.width*1.2+200,-i * newBlock.height*1.2+200);\r\n                newBlock.getComponent(Block).init(bigFriutSprite,new cc.Vec2(j,i),0);\r\n            }\r\n        }\r\n    }\r\n\r\n    GeneratorFood(foodSprite,pos){\r\n        let newBlock = cc.instantiate(this.bigfruit);\r\n        newBlock.parent=this.node;\r\n        newBlock.setPosition(pos.x,pos.y);\r\n        newBlock.getComponent(Block).init(foodSprite);\r\n    }\r\n\r\n    GeneratorBomb(bombSprite,pos){\r\n        let newBlock = cc.instantiate(this.bigfruit);\r\n        newBlock.parent=this.node;\r\n        newBlock.setPosition(pos.x,pos.y);\r\n        newBlock.getComponent(Block).init(bombSprite);\r\n    }\r\n\r\n    myrandom(lower:number, upper:number) {\r\n        return Math.floor(Math.random() * (upper - lower)) + lower;\r\n    }\r\n}\r\n"]}